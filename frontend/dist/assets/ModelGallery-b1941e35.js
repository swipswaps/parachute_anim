import{c as b,r as n,f as N,b as s,j as e,B as f,T as w,h as y,i as o,k as d}from"./index-87f15445.js";import{L as x,R as M,C,a as j,b as k,d as L,e as E}from"./card-61706360.js";import{D as T}from"./download-4eead768.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=b("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function G(){const[l,c]=n.useState([]),[m,t]=n.useState(!0),[g,p]=n.useState(null),v=N(),h=async()=>{t(!0);try{const a=await fetch("/api/models");if(!a.ok)throw new Error("Failed to fetch models");const u=await a.json();c(u),p(null)}catch(a){p("Error loading models. Please try again."),console.error(a)}finally{t(!1)}};n.useEffect(()=>{h();const a=setInterval(h,3e4);return()=>clearInterval(a)},[]);const r=a=>{v(`/view/${a}`)};return m&&l.length===0?s("div",{className:"flex flex-col items-center justify-center p-8",children:[e(x,{className:"h-8 w-8 animate-spin text-primary"}),e("p",{className:"mt-4 text-lg",children:"Loading models..."})]}):s("div",{className:"container mx-auto p-4",children:[s("div",{className:"flex justify-between items-center mb-6",children:[e("h2",{className:"text-2xl font-bold",children:"3D Model Gallery"}),s(f,{onClick:h,variant:"outline",size:"sm",children:[e(M,{className:"h-4 w-4 mr-2"}),"Refresh"]})]}),g&&e("div",{className:"bg-red-50 text-red-800 p-4 rounded-md mb-6",children:g}),s(w,{defaultValue:"all",children:[s(y,{className:"mb-4",children:[e(o,{value:"all",children:"All Models"}),e(o,{value:"recent",children:"Recent"}),l.length>0&&l.some(a=>a.format==="glb")&&e(o,{value:"glb",children:"GLB Models"}),l.length>0&&l.some(a=>a.format==="obj")&&e(o,{value:"obj",children:"OBJ Models"})]}),e(d,{value:"all",children:e(i,{models:l,onView:r,emptyMessage:"No models found. Upload a video to create your first 3D model!"})}),e(d,{value:"recent",children:e(i,{models:l.sort((a,u)=>u.createdAt-a.createdAt).slice(0,6),onView:r,emptyMessage:"No recent models found."})}),e(d,{value:"glb",children:e(i,{models:l.filter(a=>a.format==="glb"),onView:r,emptyMessage:"No GLB models found."})}),e(d,{value:"obj",children:e(i,{models:l.filter(a=>a.format==="obj"),onView:r,emptyMessage:"No OBJ models found."})})]})]})}function i({models:l,onView:c,emptyMessage:m}){return l.length===0?e("div",{className:"text-center p-8 bg-gray-50 rounded-lg",children:e("p",{className:"text-gray-500",children:m})}):e("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(t=>s(C,{className:"overflow-hidden",children:[e(j,{className:"pb-2",children:e(k,{className:"text-lg truncate",title:t.name,children:t.name})}),s(L,{className:"pb-2",children:[e("div",{className:"aspect-square bg-gray-100 rounded-md flex items-center justify-center",children:e("div",{className:"text-4xl font-bold text-gray-300 uppercase",children:t.format})}),s("div",{className:"mt-2 text-sm text-gray-500",children:["Created: ",new Date(t.createdAt*1e3).toLocaleString()]})]}),s(E,{className:"flex justify-between",children:[s(f,{variant:"outline",size:"sm",onClick:()=>window.open(t.downloadUrl,"_blank"),children:[e(T,{className:"h-4 w-4 mr-2"}),"Download"]}),s(f,{size:"sm",onClick:()=>c(t.id),children:[e(V,{className:"h-4 w-4 mr-2"}),"View"]})]})]},t.id))})}export{G as default};
